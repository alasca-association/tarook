The format of the ``[terraform]`` config section changed significantly.

Terraform nodes are now to be configured as blocks of values
rather than across separate lists for each type of value.

Furthermore you now have control over the whole name of Terraform node,
see :ref:`the documentation <cluster-configuration.configuring-terraform>`
for further details.

.. code:: diff

     [terraform]

   - masters = 2
   - master_names = ["X", "Y"]
   - master_flavors = ["M", "M"]
   - master_images = ["Ubuntu 20.04 LTS x64", "Ubuntu 22.04 LTS x64"]
   - master_azs = ["AZ1", "AZ3"]
   + #....
   +
   + [terraform.nodes.master-X]
   + role     = "master"  # mandatory
   + flavor   = "M"
   + image    = "Ubuntu 20.04 LTS x64"
   + az       = "AZ1"
   + #....
   +
   + [terraform.nodes.worker-A]
   + role     = "worker"  # mandatory
   + flavor   = "S"
   + image    = "Debian 12 (bookworm)"
   + az       = "AZ3"
     #....

The gateway/master/worker defaults are consolidated into blocks as well.

.. code:: diff

     [terraform]

   - gateway_image_name = "Debian 12 (bookworm)"
   - gateway_flavor = "XS"
   - default_master_image_name = "Ubuntu 22.04 LTS x64"
   - default_master_flavor = "M"
   - default_master_root_disk_size = 50
   - default_worker_image_name = "Ubuntu 22.04 LTS x64"
   - default_worker_flavor = "L"
   - default_worker_root_disk_size = 100
   - worker_join_anti_affinity_group = false
   + #....
   +
   + [terraform.gateway_defaults]
   + image                      = "Debian 12 (bookworm)"
   + flavor                     = "XS"
   +
   + [terraform.master_defaults]
   + image                      = "Ubuntu 22.04 LTS x64"
   + flavor                     = "M"
   + root_disk_size             = 50
   +
   + [terraform.worker_defaults]
   + image                      = "Ubuntu 22.04 LTS x64"
   + flavor                     = "L"
   + root_disk_size             = 100
   + join_anti_affinity_group   = false
     #....

.. attention:: Action required

   You must convert your config into the new format.
   <TODO: migration script>

_
