connections {

    home {
        remote_addrs = {{ networking_floating_ip }}
        # Request an arbitrary virtual IP from the responder
        vips = 0.0.0.0
        local {
            auth = eap
            eap_id = ya
        }
        remote {
            auth = pubkey
            id = {{ networking_floating_ip }}
        }
        children {
            home {
                remote_ts = {{ ipsec_local_networks | join(", ") }}
{% if ipsec_peer_networks %}
                local_ts = {{ ipsec_peer_networks | join(", ") }}
{% endif %}
                esp_proposals = {{ ipsec_esp_proposals | join(", ") }}
                start_action = trap
                dpd_action = restart
                life_time = 8h
            }
        }
        dpd_delay = 10
        version = 2
        proposals = {{ ipsec_proposals | join(", ") }}
    }
}

secrets {

    eap-ya {
        id = ya
        secret = ooSh6xai
    }
}
