# TODO: add check that version in inventory and installed version match!
- name: Show k8s version listed in playbook
  debug:
    msg: "Current k8s version according to the inventory is {{ k8s_version }}. Execute playbook with -v to see output of apt-cache policy. Pass the version to which the cluster should be updated as parameter 'next_k8s_version', i.e., ansible-playbook -i .. 05_upgrade_cluster.yaml -e next_k8s_version=1.15.4. Afterwards, update the value of k8s_version in the inventory."
- name: Show currently installed k8s version
  shell: dpkg -s kubeadm | grep Version

- name: Update the package cache
  become: yes
  apt:
    update_cache: yes

- name: Show the available k8s versions
  command: apt-cache policy kubeadm

