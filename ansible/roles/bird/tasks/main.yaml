---
- name: install bird
  become: yes
  apt:
    name: bird
    state: present
  tags:
  - bird

- name: configure bird
  become: yes
  template:
    src: bird.conf
    dest: /etc/bird/bird.conf
    owner: bird
    group: bird
    mode: 0o640
  notify: restart bird
  tags:
  - bird

- name: drop-in directory for bird config
  become: yes
  file:
    state: directory
    path: /etc/bird.d/
    owner: root
    group: bird
    mode: "u=rwx,g=rx,o-rwx"
  tags:
  - bird

- name: disable bird6
  become: yes
  service:
    name: bird6
    enabled: no
    state: stopped
  tags:
  - bird
