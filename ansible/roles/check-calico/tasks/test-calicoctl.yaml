---
- name: Check that calicoctl is installed on master nodes
  run_once: true
  become: yes

  block:
  - name: Check /usr/local/bin/calicoctl
    delegate_to: "{{ item }}"
    stat:
      path: /usr/local/bin/calicoctl
    register: calicoctl_stat_result
    failed_when: "( calicoctl_stat_result.stat.exists != true ) or ( calicoctl_stat_result.stat.mode != '0755' )"
    loop: "{{ groups['masters'] }}"
